<?php

/**
 * Implements hook_init().
 */
function moonmars_init() {
  // Activate debugging:
  dbg_on();

  relation_delete(788);

}

/**
 * Implements hook_menu().
 */
function moonmars_menu() {
  $items = array();
  $items['home'] = array(
    'page callback' => 'moonmars_home',
    'access callback' => TRUE,
    'type' => MENU_CALLBACK
  );
  $items['admin/phpinfo'] = array(
    'page callback' => 'moonmars_phpinfo',
    'access arguments' => array('execute php code'),
    'type' => MENU_CALLBACK
  );
  return $items;
}

/**
 * Redirect the user to the appropriate default start page.
 */
function moonmars_home() {
  if (user_is_logged_in()) {
    drupal_goto('activity');
  }
  else {
    drupal_goto('news');
  }
}

/**
 * Get the entity object for a node.
 *
 * @param $node
 * @return mixed
 */
function moonmars_get_entity($node) {
  $class = ucfirst($node->type);
  return $class::create($node);
}

/**
 * Display the phpinfo.
 */
function moonmars_phpinfo() {
  phpinfo();
}
